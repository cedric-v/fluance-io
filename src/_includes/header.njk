<header id="main-header" class="bg-[#82153e] fixed inset-x-0 top-0 z-50 shadow-md overflow-visible transition-all duration-300">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between relative">
    {% if locale == 'en' %}
    <a href="/en/" class="flex flex-col items-start gap-1">
    {% else %}
    <a href="/" class="flex flex-col items-start gap-1">
    {% endif %}
      {% image "assets/img/logo.png", "Fluance", "h-10 w-auto" %}
      <span class="text-xs text-[#ffce2d]/80 italic">{% if locale == 'fr' %}Le mouvement qui éveil et apaise{% else %}The movement that awakens and soothes{% endif %}</span>
    </a>

    <button class="md:hidden text-[#ffce2d] z-50 relative" data-menu-toggle aria-label="Open menu">
      <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="1.7" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16" />
      </svg>
    </button>

    <nav class="hidden md:flex items-center gap-6 font-medium text-[#ffce2d]" data-menu>
      <!-- A propos dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}A propos{% else %}About{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-56 bg-[#82153e] rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#ffce2d]/20 z-[60]">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="/en/a-propos/philosophie/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Philosophy</a>
            <a href="/en/a-propos/approche-fluance/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Fluance Approach</a>
            <a href="/en/a-propos/histoire-cedric/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Cédric's Story</a>
            {% else %}
            <a href="/a-propos/philosophie/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Philosophie</a>
            <a href="/a-propos/approche-fluance/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Approche Fluance</a>
            <a href="/a-propos/histoire-cedric/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">L'histoire de Cédric</a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Cours en ligne dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}Cours en ligne{% else %}Online Courses{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-64 bg-[#82153e] rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#ffce2d]/20 z-[60]">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="/en/cours-en-ligne/21-jours-mouvement/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">21 Days to Get Moving</a>
            <a href="/en/cours-en-ligne/approche-fluance-complete/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Complete and Regular Fluance Approach</a>
            {% else %}
            <a href="/cours-en-ligne/21-jours-mouvement/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">21 jours pour remettre du mouvement</a>
            <a href="/cours-en-ligne/approche-fluance-complete/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Approche Fluance complète et régulière</a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Présentiel dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}Présentiel{% else %}In-person{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-56 bg-[#82153e] rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#ffce2d]/20 z-[60]">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="/en/presentiel/cours-hebdomadaires/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Weekly Classes</a>
            <a href="/en/presentiel/prochains-stages/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Upcoming Workshops</a>
            <a href="/en/presentiel/en-entreprise/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Corporate</a>
            {% else %}
            <a href="/presentiel/cours-hebdomadaires/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Cours hebdomadaires</a>
            <a href="/presentiel/prochains-stages/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Prochains stages</a>
            <a href="/presentiel/en-entreprise/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">En entreprise</a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Accompagnement 1:1 dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}Accompagnement 1:1{% else %}1:1 Coaching{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-72 bg-[#82153e] rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#ffce2d]/20 z-[60]">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="/en/accompagnements-individuels/entrepreneurs-independants/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">For Entrepreneurs/Independents</a>
            {% else %}
            <a href="/accompagnements-individuels/entrepreneurs-independants/" class="block px-4 py-2 hover:bg-[#ffce2d]/10 transition">Pour entrepreneurs/indépendants</a>
            {% endif %}
          </div>
        </div>
      </div>

      {% if locale == 'en' %}
      <a href="/en/contact/" class="hover:opacity-80 transition">Contact</a>
      {% else %}
      <a href="/contact/" class="hover:opacity-80 transition">Contact</a>
      {% endif %}
      
      <a href="http://membres.fluance.io/" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition">
        {% if locale == 'fr' %}Connexion{% else %}Login{% endif %}
      </a>
      
      <div class="flex items-center gap-2 ml-2 pl-4 border-l border-[#ffce2d]/30">
        {% if locale == 'fr' %}
          <span class="font-bold text-[#ffce2d]">FR</span>
          {% set currentUrl = page.url %}
          {% set cleanUrl = currentUrl | replace('/fr/', '/') %}
          {% if cleanUrl == '/' %}
            <a href="/en/" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">EN</a>
          {% else %}
            <a href="/en{{ cleanUrl }}" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">EN</a>
          {% endif %}
        {% else %}
          {% set currentUrl = page.url %}
          {% if currentUrl == '/en/' %}
            <a href="/" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">FR</a>
          {% else %}
            <a href="{{ currentUrl | replace('/en/', '/') }}" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">FR</a>
          {% endif %}
          <span class="font-bold text-[#ffce2d]">EN</span>
        {% endif %}
      </div>
        </nav>
  </div>

  <!-- Mobile menu -->
  <nav class="md:hidden hidden absolute top-full left-0 right-0 bg-[#82153e] flex-col gap-0 px-4 pb-6 font-medium text-[#ffce2d] shadow-lg" data-menu-mobile>
    <div class="border-b border-[#ffce2d]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="a-propos">
        {% if locale == 'fr' %}A propos{% else %}About{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="a-propos" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="a-propos">
        {% if locale == 'en' %}
        <a href="/en/a-propos/philosophie/" class="block py-2">Philosophy</a>
        <a href="/en/a-propos/approche-fluance/" class="block py-2">Fluance Approach</a>
        <a href="/en/a-propos/histoire-cedric/" class="block py-2">Cédric's Story</a>
        {% else %}
        <a href="/a-propos/philosophie/" class="block py-2">Philosophie</a>
        <a href="/a-propos/approche-fluance/" class="block py-2">Approche Fluance</a>
        <a href="/a-propos/histoire-cedric/" class="block py-2">L'histoire de Cédric</a>
        {% endif %}
      </div>
    </div>

    <div class="border-b border-[#ffce2d]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="cours-en-ligne">
        {% if locale == 'fr' %}Cours en ligne{% else %}Online Courses{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="cours-en-ligne" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="cours-en-ligne">
        {% if locale == 'en' %}
        <a href="/en/cours-en-ligne/21-jours-mouvement/" class="block py-2">21 Days to Get Moving</a>
        <a href="/en/cours-en-ligne/approche-fluance-complete/" class="block py-2">Complete and Regular Fluance Approach</a>
        {% else %}
        <a href="/cours-en-ligne/21-jours-mouvement/" class="block py-2">21 jours pour remettre du mouvement</a>
        <a href="/cours-en-ligne/approche-fluance-complete/" class="block py-2">Approche Fluance complète et régulière</a>
        {% endif %}
      </div>
    </div>

    <div class="border-b border-[#ffce2d]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="presentiel">
        {% if locale == 'fr' %}Présentiel{% else %}In-person{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="presentiel" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="presentiel">
        {% if locale == 'en' %}
        <a href="/en/presentiel/cours-hebdomadaires/" class="block py-2">Weekly Classes</a>
        <a href="/en/presentiel/prochains-stages/" class="block py-2">Upcoming Workshops</a>
        <a href="/en/presentiel/en-entreprise/" class="block py-2">Corporate</a>
        {% else %}
        <a href="/presentiel/cours-hebdomadaires/" class="block py-2">Cours hebdomadaires</a>
        <a href="/presentiel/prochains-stages/" class="block py-2">Prochains stages</a>
        <a href="/presentiel/en-entreprise/" class="block py-2">En entreprise</a>
        {% endif %}
      </div>
    </div>

    <div class="border-b border-[#ffce2d]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="accompagnements">
        {% if locale == 'fr' %}Accompagnement 1:1{% else %}1:1 Coaching{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="accompagnements" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="accompagnements">
        {% if locale == 'en' %}
        <a href="/en/accompagnements-individuels/entrepreneurs-independants/" class="block py-2">For Entrepreneurs/Independents</a>
        {% else %}
        <a href="/accompagnements-individuels/entrepreneurs-independants/" class="block py-2">Pour entrepreneurs/indépendants</a>
        {% endif %}
      </div>
    </div>

    {% if locale == 'en' %}
    <a href="/en/contact/" class="block py-2 border-b border-[#ffce2d]/20">Contact</a>
    {% else %}
    <a href="/contact/" class="block py-2 border-b border-[#ffce2d]/20">Contact</a>
    {% endif %}
    
    <a href="http://membres.fluance.io/" target="_blank" rel="noopener noreferrer" class="block py-2 border-b border-[#ffce2d]/20">
      {% if locale == 'fr' %}Connexion{% else %}Login{% endif %}
    </a>
    
    <div class="pt-3 mt-2 border-t border-[#ffce2d]/20">
      <div class="flex items-center justify-center gap-2 py-2">
        {% if locale == 'fr' %}
          <span class="font-bold text-[#ffce2d]">FR</span>
          <span class="text-[#ffce2d]/40">|</span>
          {% set currentUrl = page.url %}
          {% set cleanUrl = currentUrl | replace('/fr/', '/') %}
          {% if cleanUrl == '/' %}
            <a href="/en/" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">EN</a>
          {% else %}
            <a href="/en{{ cleanUrl }}" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">EN</a>
          {% endif %}
        {% else %}
          {% set currentUrl = page.url %}
          {% if currentUrl == '/en/' %}
            <a href="/" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">FR</a>
          {% else %}
            <a href="{{ currentUrl | replace('/en/', '/') }}" class="text-[#ffce2d]/60 hover:text-[#ffce2d] hover:opacity-100 transition">FR</a>
          {% endif %}
          <span class="text-[#ffce2d]/40">|</span>
          <span class="font-bold text-[#ffce2d]">EN</span>
        {% endif %}
      </div>
    </div>
  </nav>
</header>
