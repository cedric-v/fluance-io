<header id="main-header" class="bg-fluance fixed inset-x-0 top-0 z-50 shadow-md overflow-visible transition-all duration-300">
  <div class="max-w-6xl mx-auto px-4 flex items-center justify-between relative header-container">
    {% if locale == 'en' %}
    <a href="{{ '/en/' | relativeUrl }}" class="flex flex-col items-start gap-0">
    {% else %}
    <a href="{{ '/fr/' | relativeUrl }}" class="flex flex-col items-start gap-0">
    {% endif %}
      {% image "assets/img/logo.png", "Fluance", "h-12 md:h-14 w-auto", "eager", "", "1536", "1024" %}
      <span class="header-slogan text-xs text-[#E6B84A]/80 italic -mt-1">{% if locale == 'fr' %}Le mouvement qui éveille et apaise{% else %}The movement that awakens and soothes{% endif %}</span>
    </a>

    <button class="md:hidden text-[#E6B84A] z-50 relative" data-menu-toggle aria-label="Open menu">
      <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="1.7" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16" />
      </svg>
    </button>

    <nav class="hidden md:flex items-center gap-6 font-medium text-[#E6B84A]" data-menu>
      <!-- A propos dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}A propos{% else %}About{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-56 bg-fluance rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#E6B84A]/20 z-60">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="{{ '/en/a-propos/philosophie/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Philosophy</a>
            <a href="{{ '/en/a-propos/approche-fluance/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Fluance Approach</a>
            <a href="{{ '/en/a-propos/histoire-cedric/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Cédric's Story</a>
            {% else %}
            <a href="{{ '/a-propos/philosophie/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Philosophie</a>
            <a href="{{ '/a-propos/approche-fluance/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Approche Fluance</a>
            <a href="{{ '/a-propos/histoire-cedric/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">L'histoire de Cédric</a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Cours en ligne dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}Cours en ligne{% else %}Online Courses{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-64 bg-fluance rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#E6B84A]/20 z-60">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="{{ '/en/cours-en-ligne/21-jours-mouvement/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">21 Days to Get Moving</a>
            <a href="{{ '/en/cours-en-ligne/approche-fluance-complete/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Complete and Regular Fluance Approach</a>
            <a href="{{ '/en/presentiel/en-entreprise/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Corporate</a>
            {% else %}
            <a href="{{ '/cours-en-ligne/21-jours-mouvement/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">21 jours pour remettre du mouvement</a>
            <a href="{{ '/cours-en-ligne/approche-fluance-complete/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Approche Fluance complète et régulière</a>
            <a href="{{ '/presentiel/en-entreprise/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Pour entreprise</a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Présentiel dropdown -->
      <div class="relative group z-50">
        <button class="hover:opacity-80 transition flex items-center gap-1">
          {% if locale == 'fr' %}Présentiel{% else %}In-person{% endif %}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="absolute top-full left-0 mt-2 w-56 bg-fluance rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-[#E6B84A]/20 z-60">
          <div class="py-2">
            {% if locale == 'en' %}
            <a href="{{ '/en/presentiel/cours-hebdomadaires/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Weekly Classes</a>
            <a href="{{ '/en/presentiel/reserver/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Book a Class</a>
            <a href="{{ '/en/presentiel/prochains-stages/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Upcoming Workshops</a>
            <a href="{{ '/en/presentiel/en-entreprise/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Corporate</a>
            {% else %}
            <a href="{{ '/presentiel/cours-hebdomadaires/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Cours hebdomadaires</a>
            <a href="{{ '/presentiel/reserver/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Réserver un cours</a>
            <a href="{{ '/presentiel/prochains-stages/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">Prochains stages</a>
            <a href="{{ '/presentiel/en-entreprise/' | relativeUrl }}" class="block px-4 py-2 hover:bg-[#E6B84A]/10 transition">En entreprise</a>
            {% endif %}
          </div>
        </div>
      </div>

      {% if locale == 'en' %}
      <a href="{{ '/en/contact/' | relativeUrl }}" class="hover:opacity-80 transition">Contact</a>
      {% else %}
      <a href="{{ '/contact/' | relativeUrl }}" class="hover:opacity-80 transition">Contact</a>
      {% endif %}
      
      {% if locale == 'en' %}
      <a href="{{ '/en/connexion/' | relativeUrl }}" class="hover:opacity-80 transition">Login</a>
      {% else %}
      <a href="{{ '/connexion/' | relativeUrl }}" class="hover:opacity-80 transition">Connexion</a>
      {% endif %}

      <!-- Entrepreneurs -->
      <div class="ml-2 pl-4 border-l border-[#E6B84A]/20">
        {% if locale == 'en' %}
        <a href="{{ '/en/accompagnements-individuels/entrepreneurs-independants/' | relativeUrl }}" class="hover:opacity-80 transition">Entrepreneurs</a>
        {% else %}
        <a href="{{ '/accompagnements-individuels/entrepreneurs-independants/' | relativeUrl }}" class="hover:opacity-80 transition">Entrepreneurs</a>
        {% endif %}
      </div>
      
      <div class="flex items-center gap-2 ml-2 pl-4 border-l border-[#E6B84A]/30">
        {% if locale == 'fr' %}
          <span class="font-bold text-[#E6B84A]">FR</span>
          {% set currentUrl = page.url %}
          {% if currentUrl == '/' %}
            {% set targetUrl = '/en/' %}
          {% elif currentUrl == '/connexion-membre/' %}
            {% set targetUrl = '/en/member-login/' %}
          {% elif currentUrl == '/creer-compte/' %}
            {% set targetUrl = '/en/create-account/' %}
          {% elif currentUrl == '/reinitialiser-mot-de-passe/' %}
            {% set targetUrl = '/en/reset-password/' %}
          {% else %}
            {% set cleanUrl = currentUrl | replace('/fr/', '/') %}
            {% if cleanUrl == '/' %}
              {% set targetUrl = '/en/' %}
            {% else %}
              {% set targetUrl = '/en' + cleanUrl %}
            {% endif %}
          {% endif %}
          <a href="{{ targetUrl | relativeUrl }}" class="text-[#E6B84A]/60 hover:text-[#E6B84A] hover:opacity-100 transition">EN</a>
        {% else %}
          {% set currentUrl = page.url %}
          {% if currentUrl == '/en/' %}
            {% set targetUrl = '/' %}
          {% elif currentUrl == '/en/member-login/' %}
            {% set targetUrl = '/connexion-membre/' %}
          {% elif currentUrl == '/en/create-account/' %}
            {% set targetUrl = '/creer-compte/' %}
          {% elif currentUrl == '/en/reset-password/' %}
            {% set targetUrl = '/reinitialiser-mot-de-passe/' %}
          {% else %}
            {% set targetUrl = currentUrl | replace('/en/', '/') %}
          {% endif %}
          <a href="{{ targetUrl | relativeUrl }}" class="text-[#E6B84A]/60 hover:text-[#E6B84A] hover:opacity-100 transition">FR</a>
          <span class="font-bold text-[#E6B84A]">EN</span>
        {% endif %}
      </div>
        </nav>
  </div>

  <!-- Mobile menu -->
  <nav class="md:hidden hidden absolute top-full left-0 right-0 bg-fluance flex-col gap-0 px-4 pb-6 font-medium text-[#E6B84A] shadow-lg" data-menu-mobile>
    <div class="border-b border-[#E6B84A]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="a-propos">
        {% if locale == 'fr' %}A propos{% else %}About{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="a-propos" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="a-propos">
        {% if locale == 'en' %}
        <a href="{{ '/en/a-propos/philosophie/' | relativeUrl }}" class="block py-2">Philosophy</a>
        <a href="{{ '/en/a-propos/approche-fluance/' | relativeUrl }}" class="block py-2">Fluance Approach</a>
        <a href="{{ '/en/a-propos/histoire-cedric/' | relativeUrl }}" class="block py-2">Cédric's Story</a>
        {% else %}
        <a href="{{ '/a-propos/philosophie/' | relativeUrl }}" class="block py-2">Philosophie</a>
        <a href="{{ '/a-propos/approche-fluance/' | relativeUrl }}" class="block py-2">Approche Fluance</a>
        <a href="{{ '/a-propos/histoire-cedric/' | relativeUrl }}" class="block py-2">L'histoire de Cédric</a>
        {% endif %}
      </div>
    </div>

    <div class="border-b border-[#E6B84A]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="cours-en-ligne">
        {% if locale == 'fr' %}Cours en ligne{% else %}Online Courses{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="cours-en-ligne" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="cours-en-ligne">
        {% if locale == 'en' %}
        <a href="{{ '/en/cours-en-ligne/21-jours-mouvement/' | relativeUrl }}" class="block py-2">21 Days to Get Moving</a>
        <a href="{{ '/en/cours-en-ligne/approche-fluance-complete/' | relativeUrl }}" class="block py-2">Complete and Regular Fluance Approach</a>
        <a href="{{ '/en/presentiel/en-entreprise/' | relativeUrl }}" class="block py-2">Corporate</a>
        {% else %}
        <a href="{{ '/cours-en-ligne/21-jours-mouvement/' | relativeUrl }}" class="block py-2">21 jours pour remettre du mouvement</a>
        <a href="{{ '/cours-en-ligne/approche-fluance-complete/' | relativeUrl }}" class="block py-2">Approche Fluance complète et régulière</a>
        <a href="{{ '/presentiel/en-entreprise/' | relativeUrl }}" class="block py-2">Pour entreprise</a>
        {% endif %}
      </div>
    </div>

    <div class="border-b border-[#E6B84A]/20">
      <button class="w-full text-left py-2 flex items-center justify-between" data-mobile-dropdown="presentiel">
        {% if locale == 'fr' %}Présentiel{% else %}In-person{% endif %}
        <svg class="w-4 h-4 transition-transform" data-arrow="presentiel" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div class="hidden pl-4 pb-2" data-dropdown-content="presentiel">
        {% if locale == 'en' %}
        <a href="{{ '/en/presentiel/cours-hebdomadaires/' | relativeUrl }}" class="block py-2">Weekly Classes</a>
        <a href="{{ '/en/presentiel/reserver/' | relativeUrl }}" class="block py-2">Book a Class</a>
        <a href="{{ '/en/presentiel/prochains-stages/' | relativeUrl }}" class="block py-2">Upcoming Workshops</a>
        <a href="{{ '/en/presentiel/en-entreprise/' | relativeUrl }}" class="block py-2">Corporate</a>
        {% else %}
        <a href="{{ '/presentiel/cours-hebdomadaires/' | relativeUrl }}" class="block py-2">Cours hebdomadaires</a>
        <a href="{{ '/presentiel/reserver/' | relativeUrl }}" class="block py-2">Réserver un cours</a>
        <a href="{{ '/presentiel/prochains-stages/' | relativeUrl }}" class="block py-2">Prochains stages</a>
        <a href="{{ '/presentiel/en-entreprise/' | relativeUrl }}" class="block py-2">En entreprise</a>
        {% endif %}
      </div>
    </div>

    {% if locale == 'en' %}
    <a href="{{ '/en/contact/' | relativeUrl }}" class="block py-2 border-b border-[#E6B84A]/20">Contact</a>
    {% else %}
    <a href="{{ '/contact/' | relativeUrl }}" class="block py-2 border-b border-[#E6B84A]/20">Contact</a>
    {% endif %}
    
    {% if locale == 'en' %}
    <a href="{{ '/en/connexion/' | relativeUrl }}" class="block py-2 border-b border-[#E6B84A]/20">Login</a>
    {% else %}
    <a href="{{ '/connexion/' | relativeUrl }}" class="block py-2 border-b border-[#E6B84A]/20">Connexion</a>
    {% endif %}
    
    <div class="pt-3 mt-2 border-t border-[#E6B84A]/20">
      {% if locale == 'en' %}
      <a href="{{ '/en/accompagnements-individuels/entrepreneurs-independants/' | relativeUrl }}" class="block py-2 border-b border-[#E6B84A]/20">Entrepreneurs</a>
      {% else %}
      <a href="{{ '/accompagnements-individuels/entrepreneurs-independants/' | relativeUrl }}" class="block py-2 border-b border-[#E6B84A]/20">Entrepreneurs</a>
      {% endif %}
      <div class="flex items-center justify-center gap-2 py-2">
        {% if locale == 'fr' %}
          <span class="font-bold text-[#E6B84A]">FR</span>
          <span class="text-[#E6B84A]/40">|</span>
          {% set currentUrl = page.url %}
          {% if currentUrl == '/' %}
            {% set targetUrl = '/en/' %}
          {% elif currentUrl == '/connexion-membre/' %}
            {% set targetUrl = '/en/member-login/' %}
          {% elif currentUrl == '/creer-compte/' %}
            {% set targetUrl = '/en/create-account/' %}
          {% elif currentUrl == '/reinitialiser-mot-de-passe/' %}
            {% set targetUrl = '/en/reset-password/' %}
          {% else %}
            {% set cleanUrl = currentUrl | replace('/fr/', '/') %}
            {% if cleanUrl == '/' %}
              {% set targetUrl = '/en/' %}
            {% else %}
              {% set targetUrl = '/en' + cleanUrl %}
            {% endif %}
          {% endif %}
          <a href="{{ targetUrl | relativeUrl }}" class="text-[#E6B84A]/60 hover:text-[#E6B84A] hover:opacity-100 transition">EN</a>
        {% else %}
          {% set currentUrl = page.url %}
          {% if currentUrl == '/en/' %}
            {% set targetUrl = '/' %}
          {% elif currentUrl == '/en/member-login/' %}
            {% set targetUrl = '/connexion-membre/' %}
          {% elif currentUrl == '/en/create-account/' %}
            {% set targetUrl = '/creer-compte/' %}
          {% elif currentUrl == '/en/reset-password/' %}
            {% set targetUrl = '/reinitialiser-mot-de-passe/' %}
          {% else %}
            {% set targetUrl = currentUrl | replace('/en/', '/') %}
          {% endif %}
          <a href="{{ targetUrl | relativeUrl }}" class="text-[#E6B84A]/60 hover:text-[#E6B84A] hover:opacity-100 transition">FR</a>
          <span class="text-[#E6B84A]/40">|</span>
          <span class="font-bold text-[#E6B84A]">EN</span>
        {% endif %}
      </div>
    </div>
  </nav>
</header>
